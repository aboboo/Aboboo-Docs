全文复读方案
############

.. contents:: :local:

使用方案控制复读行为
********************
用一致的规则控制复读，例如：

* 每句连续播完3遍以后再播下一句，
* 第1遍和第3遍正常播放
* 第2遍播放速度为60%

这种规则称为 **复读方案** 。选择复读区间后，复读方案对复读区间做更精细的控制。

常有用户误认为全文复读方案对一键式和两键式无效，有这样的误解，是没能准确理解 **复读区间** 。

标记式以句子为复读区间，一键式和两键式需要手动选取复读区间，如果没有选取复读区间，复读方案缺少作用域，自然不起作用。

内置方案
********
预置三种方案：简单模式、听力练习模式、口语练习模式，预置方案不能改动。

* 简单模式：仅播放一遍，所有播放参数使用默认值（用户通过播放工具条设置的值）

   .. figure:: /images/workflow-predefined-simple.png
     :align: center

     简单模式

* 听力练习模式：音量用默认值，其它参数恒定。

   .. figure:: /images/workflow-predefined-listen.png
     :align: center

     听力练习模式

* 口语练习模式：音量用默认值，其它参数恒定。

   .. figure:: /images/workflow-predefined-oral.png
     :align: center

     口语练习模式

添加自定义方案
********************

* 点击设置图标

  .. figure:: /images/menu-workflow-setup-or-select.png
     :align: center

     点击设置图标

* 添加方案

  .. figure:: /images/workflow-create-new.png
     :align: center

     添加方案


  定义每一遍的播放属性:

  * 读后暂停时间
  * 播放速度
  * 播放音量
  * 波形窗口
  
  两个特殊值:
  
  * 自定义: 通过 :menuselection:`菜单 --> 参数设置 --> 复读参数 --> 自定义复读次数和读后暂停时间` 设定的值，目前只有“读后暂停时间”可以使用“自定义”值。  
  * 默认设置: 通过"播放工具条"设定的值。如果方案设定播放速率为“第1遍”60%，“第2遍”默认，用户播放时用“播放工具条”设定播放速率为135%，实际播放时，第1遍为60%，第2遍为135%。
  
  通过这两个值，使用全文复读方案的同时，也能按需动态调整各项参数，十分便利。

  自定义方案保存以后，出现在选择菜单中，可随时选用。
  
  * 点击选择图标

  .. figure:: /images/menu-workflow-setup-or-select.png
     :align: center

     点击选择图标
  
  * 选择方案

  .. figure:: /images/workflow-select.png
     :align: center

     选择全文复读方案


究竟循环多少次？
********************
  
系统默认使用 **简单模式** ，播放1遍，读后暂停、速率和音量等参数都使用默认设置（播放工具条的设置），因此我们感觉不到复读方案的存在。
  
如果您用工具条设置“朗读循环次数”为“2”，选用预置“听力练习模式”，可以观察到，Aboboo套用“听力练习模式”流程，首先让第一句进入第1次循环，播放3遍，再让第一句进入第2次循环，又播放3遍，当前句子一共播放 6 次(3遍 * 2次循环)，然后才播放下一句。
  
播放工具条的 **循环次数** 是指“全文复读方案”的完整流程作为一个整体，被循环的次数。表格能清楚地说明“循环次数”(第二列)和“全文复读方案”的“播放遍数”(第三列)以及句子被复读的实际遍数(第四列)的关系。

首先用工具条设置“朗读循环次数”为 **2** ，使用 **听力练习模式**，Aboboo按照下表顺序完成复读（表里只有前两句）:

+----------------------------+----------------------------+----------------------------+----------------------------+
| 句子/复读区间              | 工具条设置的循环遍次       | 听力练习模式的遍次         | 耳朵听到的遍次             |
+============================+============================+============================+============================+
| 第 1 句                    | 第 1 次循环                | 第 1 遍                    | 第 1 句复读第 1 遍         |
|                            |                            +----------------------------+----------------------------+
|                            |                            | 第 2 遍                    | 第 1 句复读第 2 遍         |
|                            |                            +----------------------------+----------------------------+
|                            |                            | 第 3 遍                    | 第 1 句复读第 3 遍         |
|                            +----------------------------+----------------------------+----------------------------+
|                            | 第 2 次循环                | 第 1 遍                    | 第 1 句复读第 4 遍         |
|                            |                            +----------------------------+----------------------------+
|                            |                            | 第 2 遍                    | 第 1 句复读第 5 遍         |
|                            |                            +----------------------------+----------------------------+
|                            |                            | 第 3 遍                    | 第 1 句复读第 6 遍         |
+----------------------------+----------------------------+----------------------------+----------------------------+
| 第 2 句                    | 第 1 次循环                | 第 1 遍                    | 第 2 句复读第 1 遍         |
|                            |                            +----------------------------+----------------------------+
|                            |                            | 第 2 遍                    | 第 2 句复读第 2 遍         |
|                            |                            +----------------------------+----------------------------+
|                            |                            | 第 3 遍                    | 第 2 句复读第 3 遍         |
|                            +----------------------------+----------------------------+----------------------------+
|                            | 第 2 次循环                | 第 1 遍                    | 第 2 句复读第 4 遍         |
|                            |                            +----------------------------+----------------------------+
|                            |                            | 第 2 遍                    | 第 2 句复读第 5 遍         |
|                            |                            +----------------------------+----------------------------+
|                            |                            | 第 3 遍                    | 第 2 句复读第 6 遍         |
+----------------------------+----------------------------+----------------------------+----------------------------+
